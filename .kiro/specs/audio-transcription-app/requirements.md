# 要件文書

## 概要

音声ファイルから高品質な文字起こしを生成するMacOS用Electronアプリケーション。Demucsを使用した音声分離機能と、複数のWhisperモデル（faster-whisper small/medium、OpenAI Whisper large-v3-turbo）から選択可能な文字起こし機能を提供する。ローカル環境で動作し、プライバシーを重視したオフライン処理を実現する。

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、文字起こしのために音声ファイルを選択したい。様々な音声フォーマットから音声をテキストに変換できるようにするため。

#### 受け入れ基準

1. ユーザーがアプリケーションを開いたとき、システムはファイル選択インターフェースを表示する
2. ユーザーがファイル選択ボタンをクリックしたとき、システムは一般的な音声フォーマット（mp3、wav、m4a、flac、aac）をサポートするファイルダイアログを開く
3. ユーザーが有効な音声ファイルを選択したとき、システムは選択されたファイル名と基本メタデータを表示する
4. ユーザーがサポートされていないファイルフォーマットを選択した場合、システムはエラーメッセージを表示してファイルを拒否する

### 要件 2

**ユーザーストーリー:** ユーザーとして、異なるWhisperモデルから選択したい。ニーズに基づいて処理速度と精度のバランスを取れるようにするため。

#### 受け入れ基準

1. ユーザーが文字起こし設定にアクセスしたとき、システムは3つのモデルオプションを表示する：faster-whisper small、faster-whisper medium、OpenAI Whisper large-v3-turbo
2. アプリケーションが起動したとき、システムはfaster-whisper smallモデルをデフォルトとする
3. ユーザーが異なるモデルを選択したとき、システムは将来のセッションのために設定を保存する
4. ユーザーがモデルオプションにマウスオーバーしたとき、システムは処理速度と精度のトレードオフに関する情報を表示する

### 要件 3

**ユーザーストーリー:** ユーザーとして、Demucsを使用してシステムに音声ソースを分離してもらいたい。混合音声からより清潔な文字起こし結果を得られるようにするため。

#### 受け入れ基準

1. ユーザーが音声分離を有効にしたとき、システムは文字起こし前にDemucsを通して音声ファイルを処理する
2. Demucs処理が開始されたとき、システムは進捗インジケーターと推定残り時間を表示する
3. Demucs処理が完了したとき、システムは文字起こし用のボーカルトラックを抽出する
4. Demucs処理が失敗した場合、システムは元の音声ファイルを使用するフォールバックを行い、ユーザーに通知する

### 要件 4

**ユーザーストーリー:** ユーザーとして、文字起こし中のリアルタイム進捗を見たい。プロセスにどのくらい時間がかかるかを理解できるようにするため。

#### 受け入れ基準

1. 文字起こしが開始されたとき、システムは完了率付きの進捗バーを表示する
2. 文字起こしが処理中のとき、システムは推定残り時間を表示する
3. 文字起こしが完了したとき、システムは完全な文字起こしテキストを表示する
4. 文字起こしが失敗した場合、システムはトラブルシューティング提案付きの明確なエラーメッセージを表示する

### 要件 5

**ユーザーストーリー:** ユーザーとして、文字起こし結果を複数のフォーマットでエクスポートしたい。異なるアプリケーションでテキストを使用できるようにするため。

#### 受け入れ基準

1. 文字起こしが完了したとき、システムはtxt、docx、srtフォーマットのエクスポートオプションを提供する
2. ユーザーがエクスポートをクリックしたとき、システムは選択されたフォーマットで保存ダイアログを開く
3. エクスポートが完了したとき、システムはファイル場所付きの成功メッセージを表示する
4. srtフォーマットにエクスポートするとき、システムは適切なタイムスタンプフォーマットを含める

### 要件 6

**ユーザーストーリー:** ユーザーとして、アプリケーションがオフラインで動作してほしい。インターネット接続なしで機密音声を文字起こしできるようにするため。

#### 受け入れ基準

1. アプリケーションが起動したとき、システムは必要なすべてのモデルがローカルにインストールされていることを確認する
2. モデルが不足しているとき、システムはインストールの明確な指示を提供する
3. 音声を処理するとき、システムはインターネット接続なしですべての操作をローカルで実行する
4. 初期セットアップでインターネットが必要な場合、システムはこの要件を明確に伝える

### 要件 7

**ユーザーストーリー:** ユーザーとして、エクスポート前に文字起こし結果を編集したい。生成されたテキストのエラーを修正できるようにするため。

#### 受け入れ基準

1. 文字起こしが完了したとき、システムは編集可能なテキストエリアにテキストを表示する
2. ユーザーがテキストを変更したとき、システムは変更を自動的に保存する
3. ユーザーがエクスポートするとき、システムは編集されたバージョンのテキストを使用する
4. ユーザーが変更を元に戻したいとき、システムは元の文字起こしを復元するオプションを提供する